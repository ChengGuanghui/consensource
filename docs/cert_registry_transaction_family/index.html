<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Transaction Family - Blockchain at Target Docs</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;favicon.png">
        
        
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;variables.css">
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;general.css">
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;chrome.css">
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;print.css" media="print">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;highlight.css">
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;tomorrow-night.css">
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;ayu-highlight.css">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;FontAwesome&#x2F;css&#x2F;font-awesome.min.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        
        

        
        
    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            
            <nav role="navigation">
                <ul>
                    
                        
                        
                            <li >
                                
                                <strong><a href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;about&#x2F;" class="subsection-title">
                                    
                                    Consensource
                                </a></strong>
                                
                            </li>
                        
                            <li >
                                
                                <strong><a href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;state_delta_export&#x2F;" class="subsection-title">
                                    
                                    State Delta Export
                                </a></strong>
                                
                            </li>
                        
                            <li class="active">
                                
                                <strong><a href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;cert_registry_transaction_family&#x2F;" class="subsection-title">
                                    
                                    Transaction Family
                                </a></strong>
                                
                            </li>
                        
                            <li >
                                
                                <strong><a href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;glossary&#x2F;" class="subsection-title">
                                    
                                    Glossary
                                </a></strong>
                                
                            </li>
                        
                    
                </ul>
            </nav>
            
            
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>

                        <h1 class="menu-title">Blockchain at Target Docs</h1> 
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        
    <h1>Transaction Family</h1>
    <h1 id="consensource-certificate-registry-transaction-family">ConsenSource: Certificate Registry Transaction Family</h1>
<h1 id="overview">Overview</h1>
<p>ConsenSource is a certificate registry, as data pertaining to the process of factory certification is captured in the ledger state. This Certificate Registry (henceforth referred to as CR) Transaction family displays the interactions currently implemented for any participant that affects state data. Furthermore, this lays out the logic behind all interactions to verify the data submitted to the ledger.</p>
<h1 id="addressing">Addressing</h1>
<p>CR data is stored in state using addresses generated from the CR Transaction
family name and the object type being stored. In particular, a
CR address consists of 4 parts creating a 70 hex character string.</p>
<ul>
<li>
<p>The first 6 characters of the SHA-256 hash of the UTF-8 encoding of the string &quot;certificate_registry&quot; (<code>439a56</code>).</p>
</li>
<li>
<p>The next 2 characters reserve a namespace and we will start with the namespace <code>00</code>.</p>
</li>
<li>
<p>The next 2 characters are determined by the object type.</p>
<ul>
<li><code>00</code> will signify an <em>agent</em> object.</li>
<li><code>01</code> will signify a <em>certificate</em> object.</li>
<li><code>02</code> will signify an <em>organization</em> object.</li>
<li><code>03</code> will signify a <em>standard</em> object.</li>
<li><code>04</code> will signify a <em>request</em> object.</li>
</ul>
</li>
<li>
<p>The final 60 characters is a truncated value of the SHA-256 hash of the UTF-8 encoding of:</p>
<ul>
<li>The public key string of the agent creating the object (first 60 chars of the hash) for an <em>agent</em> object.</li>
<li>The certificate id for a <em>certificate</em> object.</li>
<li>The organization id for an <em>organization</em> object.</li>
<li>The standard id for a <em>standard</em> object.</li>
<li>The request id for a <em>request</em> object.</li>
</ul>
</li>
</ul>
<p>For example, the CR address for the creation of an agent object would look like the following:
<code>439a560000DFB4D55EE01720E8F098CA4F5063C67BDEA82732113C9D41B3F345B1EAFA</code></p>
<h1 id="state">State</h1>
<h2 id="agent-state">Agent State</h2>
<p>A CR Agent state entry is required to consist of the following protobuf message:</p>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/agent.proto">agent.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message Agent {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Public key associated with the agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string public_key = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// A human-readable name identifying the agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// A human-readable organization ID identifying the associated org.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string organization_id = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Approximately when the agent was registered.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 timestamp = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message AgentContainer {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Agent entries = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>In the event of a hash collision (i.e. two or more state entries
sharing the same address), the colliding state entries will be stored in the agent container defined in the proto file above.</p>
<h2 id="organization-state">Organization State</h2>
<p>A CR Organization state entry is required to consist of the following protobuf message:</p>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/organization.proto">organization.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message Organization {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">enum Type {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UNSET_TYPE = 0;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CERTIFYING_BODY = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">STANDARDS_BODY = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">FACTORY = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message Authorization {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">enum Role {
</span><span style="background-color:#2b303b;color:#c0c5ce;">            </span><span style="background-color:#2b303b;color:#c0c5ce;">UNSET_ROLE = 0;
</span><span style="background-color:#2b303b;color:#c0c5ce;">            </span><span style="background-color:#2b303b;color:#c0c5ce;">ADMIN = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">            </span><span style="background-color:#2b303b;color:#c0c5ce;">TRANSACTOR = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Public key of the authorized agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string public_key = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Agent&#39;s role within the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">Role role = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message Contact {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the person.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Contact&#39;s phone number.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string phone_number = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// ISO 639‑1 language code of the contact.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string language_code = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// List of authorized agents and their roles within the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Authorization authorizations = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// List contacts within the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Contact contacts = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// What type of organization this data represents.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Type organization_type = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Only one of these fields will be filled based on the organization type.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">CertifyingBody certifying_body_details = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">StandardsBody standards_body_details = 7;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Factory factory_details = 8;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message CertifyingBody {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message Accreditation {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard for which the accreditation has been issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard version for which the accreditation has been issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_version = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standards body that issued the accreditation.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string accreditor_id = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time range that the accreditation is valid (UTC Timestamps)
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_from = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_to = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// List of accreditations that the certifying body holds.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Accreditation accreditations = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message StandardsBody {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// This is message could be used to capture information that is only
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// pertinent to a StandardsBody
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message Factory {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message Address {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Street address, Line 1
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string street_line_1 = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Street address, Line 2 (optional)
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string street_line_2 = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// City
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string city = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// State or province, (optional)
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string state_province = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Country
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string country = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Postal Code, (optional)
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string postal_code = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Location of the factory
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Address address = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message OrganizationContainer {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Organization entries = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>In the event of a hash collision (i.e. two or more state entries
sharing the same address), the colliding state entries will be stored in the organization container defined in the proto file above.</p>
<h2 id="certificate-state">Certificate State</h2>
<p>A CR Certificate state entry is required to consist of the following protobuf message:</p>
<p><a href="https://github.com/target/cert_registry/blob/master/protos/certificate.proto">certificate.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message Certificate {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message CertificateData {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of data field associated with certificate data.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string field = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Data stored within the data field.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string data = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// This certificate&#39;s ID.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Certifying body that issued the certificate.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string certifying_body_id = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Factory the certificate was issued to.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string factory_id = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard that this certificate is for.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard version that the certificate is for.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_version = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Additional certificate data.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated CertificateData certificate_data = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time certificate was issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_from = 7;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Approximately when the certificate will become invalid.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_to = 8;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message CertificateContainer {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Certificate entries = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>In the event of a hash collision (i.e. two or more state entries
sharing the same address), the colliding state entries will be stored in the certificate container defined in the proto file above.</p>
<h2 id="request">Request</h2>
<p>A CR Request state entry is required to consist of the following
protobuf message:</p>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/request.proto">request.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message Request {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">enum Status {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UNSET_STATUS = 0;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">OPEN = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">IN_PROGRESS = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CLOSED = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CERTIFIED = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of this request.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Status of the request.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Status status = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// The standard the factory is requesting certification against.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the factory that created this request.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string factory_id = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time request was made
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 request_date = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message RequestContainer {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Request entries = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre><h2 id="standard">Standard</h2>
<p>A CR Standard state entry is required to consist of the following
protobuf message:</p>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/request.proto">request.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message Standard {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">message StandardVersion {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard version
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string version = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Short description of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string description = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Link to the standard&#39;s documentation.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">string link = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">// Date the standard is officially issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 approval_date = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Sha256 of the standard name
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Id of the organization that created this Standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string organization_id = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// List of different versions of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated StandardVersion versions = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">message StandardContainer {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Standard entries = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>In the event of a hash collision (i.e. two or more state entries sharing the
same address), the colliding state entries will be stored in the request
container defined in the proto file above.</p>
<h1 id="transaction-payload">Transaction Payload</h1>
<p>CR transaction request payloads are defined by the following protobuf structure:</p>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L7-L38">payload.proto</a></p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message CertificateRegistryPayload{
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">enum Action {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UNSET_ACTION = 0;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CREATE_AGENT = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CREATE_ORGANIZATION = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UPDATE_ORGANIZATION = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">AUTHORIZE_AGENT = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">ISSUE_CERTIFICATE = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CREATE_STANDARD = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UPDATE_STANDARD = 7;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">OPEN_REQUEST_ACTION = 8;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">CHANGE_REQUEST_STATUS_ACTION = 9;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">ACCREDIT_CERTIFYING_BODY_ACTION = 10;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Whether the payload contains a create agent, create organization,
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// create certificate, or authorize agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Action action = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// The transaction handler will read from just one of these fields
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// according to the action.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">CreateAgentAction create_agent = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">CreateOrganizationAction create_organization = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">UpdateOrganizationAction update_organization = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">AuthorizeAgentAction authorize_agent = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">IssueCertificateAction issue_certificate = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">CreateStandardAction create_standard = 7 ;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">UpdateStandardAction update_standard = 8;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">OpenRequestAction open_request_action = 9;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">ChangeRequestStatusAction change_request_status_action = 10;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">AccreditCertifyingBodyAction accredit_certifying_body_action = 11;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>Based on the selected type, the data field will contain the appropriate transaction data (these messages would be defined within the CertificateRegistryPayload):</p>
<h2 id="createagentaction-transaction">CreateAgentAction transaction</h2>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L40-L47">CreateAgentAction protobuf</a></p>
<p>The CreateAgentAction transaction creates an agent object that is able to sign transactions and perform actions on the behalf of their associated organization. This agent object will be initialized with no associated organization ID.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message CreateAgentAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// A name identifying the agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Approximately when the agent was registered.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 timestamp = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>Name is not provided</li>
<li>Signing public key already associated with an agent</li>
</ul>
<h2 id="createorganizationaction-transaction">CreateOrganizationAction transaction</h2>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L49-L64">CreateOrganizationAction protobuf</a></p>
<p>The CreateOrganizationAction transaction creates an organization object. An organization may either be an STANDARDS_BODY, CERTIFYING_BODY or a FACTORY depending on the actions the organization will perform, such as creating standards, issuing or requesting certificates. These actions are performed by authorized agents associated with the organization. The organization object created will be initialized with the agent that signed the transaction as an ADMIN within the organization's authorizations list.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message CreateOrganizationAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Type of the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Organization.Type organization_type = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Initial contact info for the organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Organization.Contact contacts = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Address of the organization (if the organization is a Factory).
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Factory.Address address = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction will be considered invalid if one of the following occurs:</p>
<ul>
<li>Organization ID, name, and/or organization type are not provided</li>
<li>Organization ID already exists</li>
<li>Signing public key is not associated with a valid Agent object</li>
<li>Agent submitting the transaction already has an associated organization</li>
<li>Address is provided if the type is Standards Body or Certifying Body</li>
<li>Address is not provided if the type is Factory</li>
</ul>
<h2 id="updateorganizationaction-transaction">UpdateOrganizationAction transaction</h2>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L66-L72">UpdateOrganizationAction protobuf</a></p>
<p>The UpdateOrganizationAction transaction modifies the value of an Organization in state. Both the address (for factories) and the contact information may be updated. The values provided will be applied exactly as submitted with the transaction. If one or the other should stay the same, the original values should be supplied.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message UpdateOrganizationAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Updated contact info.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Organization.Contact contacts = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Updated address (if Factory).
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Factory.Address address = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The signer of the transaction is not listed as an admin of their organization</li>
<li>Provided contacts or address objects are not fully filled out</li>
<li>Address is provided if the organization is not a factory</li>
</ul>
<h2 id="authorizeagentaction-transaction">AuthorizeAgentAction transaction</h2>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L74-L83">AuthorizeAgentAction protobuf</a></p>
<p>The AuthorizeAgentAction transaction creates an entry within an organization's authorizations list for the specified public key with the specified role. This action may only be performed by an agent authorized as an ADMIN by their associated organization.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message AuthorizeAgentAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Public key associated with the agent.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string public_key = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Role to update the specified agent entry.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Roles grant permissions for an agent to act on behalf of the
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// organization.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Whether the agent is an ADMIN or ISSUER.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Organization.Authorization.Role role = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>Public key is not provided</li>
<li>Role is not provided</li>
<li>Signing public key is not associated an Agent</li>
<li>Public key provided is not associated an Agent</li>
<li>Agent submitting the transaction is not authorized as an ADMIN within their associated organization</li>
<li>Public key provided specifies an Agent already associated with an organization</li>
<li>Invalid authorization role is provided</li>
</ul>
<h2 id="issuecertificateaction-transaction">IssueCertificateAction transaction</h2>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L85-L121">IssueCertificateAction protobuf</a></p>
<p>The IssueCertificateAction transaction creates a certificate object that contains information pertaining to the specified factory and their adherence to certain policies. A Certificate object is created by an agent associated with a certifying body.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message IssueCertificateAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">enum Source {
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">UNSET_SOURCE = 0;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">FROM_REQUEST = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">        </span><span style="background-color:#2b303b;color:#c0c5ce;">INDEPENDENT= 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the certificate.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// ID of the factory that the certificate is being issued to.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string factory_id = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// The source that triggered the IssueCertificate Trasaction.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// If set to FROM_REQUEST, it means the IssueCertificateAction is associated
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// to a request made by a factory. The field request_id must be set.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">//  If set to INDEPENDENT, it means the IssueCertificateAction is not associated
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">//  with a request made by a factory. The field factory_id and standard_id must be set.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Source source = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// ID of the request (if source is FROM_REQUEST)
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string request_id = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard that this certificate is for.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Additional certificate data.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">repeated Certificate.CertificateData certificate_data = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time certificate was issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_from = 7;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Approximately when the certificate will become invalid.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_to = 8;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>ID, factory ID, standard name, valid from timestamp and/or valid to timestamp are not provided</li>
<li>Certificate ID is already associated with a Certificate object</li>
<li>Factory ID does not reference a valid factory</li>
<li>Signing public key is not associated with an agent</li>
<li>Agent submitting the transaction is not associated with a certifying body</li>
<li>Certifying Body associated with the issuing agent is not accredited to issue the standard</li>
<li>Agent submitting the transaction is not an authorized TRANSACTOR within their associated organization</li>
<li>Standard name is not associated with an existing standard</li>
<li>Invalid dates are provided, pertaining to current date as well as format</li>
</ul>
<h1 id="createstandardaction-transaction">CreateStandardAction transaction</h1>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L143-162">CreateStandardAction protobuf</a>
The CreateStandardAction transaction creates a new certification standard in state. It will also create a StandardVersion sub-object, which contains details specific to the version of the standard which was supplied. A CreateStandardAction transaction is submitted by an agent associated with a standards body.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message CreateStandardAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Sha256 of the standard name
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string name = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Current version of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string version = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Short description of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string description = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Link to the standard&#39;s documentation.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string link = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Date the standard is officially issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 approval_date = 6;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The standard_id, name, version, description, link, or approval date are not provided</li>
<li>The standard_id is already associated with an existing standard</li>
<li>The signer is not associated with a standards body</li>
<li>The signer is not authorized as a transactor within their organization</li>
</ul>
<h1 id="updatestandardaction-transaction">UpdateStandardAction transaction</h1>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L164-L179">UpdateStandardAction protobuf</a>
The UpdateStandardAction transaction creates a new standard version in state, under the associated standard object. An UpdateStandardAction transaction is submitted by an agent associated with a standards body.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message UpdateStandardAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard that is being updated.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// New version of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string version = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Short description of the standard.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string description = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Link to the standard&#39;s documentation.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string link = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Date the standard is officially issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 approval_date = 5;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The standard_id, version, description, link, or approval date are not provided</li>
<li>The standard_id is not associated with an existing standard</li>
<li>The version is already associated with an existing standard version</li>
<li>The signer is not associated with a standards body</li>
<li>The signer is not authorized as a transactor within their organization</li>
<li>The standard is not associated with the signer's organization</li>
</ul>
<h1 id="accreditcertifyingbodyaction-transaction">AccreditCertifyingBodyAction transaction</h1>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L181-L195">AccreditCertifyingBodyAction protobuf</a>
The AccreditCertifyingBodyAction transaction adds an accreditation to a certifying body. An UpdateStandardAction transaction is submitted by an agent associated with a standards body.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message AccreditCertifyingBodyAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the certifying body that is being accredited.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string certifying_body_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Standard that the certifying body is being accredited for.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string standard_id = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time the accreditation was issued.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_from = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// When the accreditation will become invalid.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 valid_to = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The signer is not associated with a standards body</li>
<li>The signer is not authorized as a transactor within their organization</li>
<li>The certifying body ID is not associated with a certifying body</li>
<li>The name is not associated with an existing standard</li>
<li>Invalid dates are provided, pertaining to current date as well as format</li>
</ul>
<h1 id="openrequestaction-transaction">OpenRequestAction transaction</h1>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L123-133">OpenRequestAction protobuf</a>
The OpenRequestAction transaction opens a request for certification for a factory. This transaction is submitted by an agent associated with a factory and authorized as a TRANSACTOR for their associated factory.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message OpenRequestAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// UUID of the request
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string request_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Certification standard of which the factory is requesting from an certification body
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Request.Certification_Standard certification_standard = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Name of the factory that is opening the request
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string factory_name = 3;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Time request was made
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Format: UTC timestamp
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">uint64 request_date = 4;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The signer is not associated with a factory</li>
<li>The signer is not authorized as a transactor within their organization</li>
<li>The id is not unique</li>
<li>The standards name is not associated with a valid standard</li>
<li>If any of these fields are empty</li>
</ul>
<h1 id="changerequeststatusaction-transaction">ChangeRequestStatusAction transaction</h1>
<p><a href="https://github.com/target/ConsenSource/blob/master/protos/payload.proto#L135-141">ChangeRequestStatusAction protobuf</a>
The ChangeRequestStatusAction transaction is performed when a factory's certification request status is changed, such as to CLOSED, IN_PROGRESS, or CERTIFIED. This transaction results from either a factory changing the status to CLOSED or IN_PROGRESS, which would be submitted by an agent associated with the factory and authorized as a TRANSACTOR.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">message ChangeRequestStatusAction {
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// Request for which the status is being changed.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">string request_id = 1;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">// New status of the request.
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">Request.Status status = 2;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p>This transaction is considered invalid if one of the following occurs:</p>
<ul>
<li>The signer is not associated with a factory</li>
<li>The signer is not authorized as a transactor within their organization</li>
<li>A request with the provided id does not exist</li>
<li>The status is not a valid status enum: IN_PROGRESS or CLOSED</li>
<li>The status is already CLOSED or CERTIFIED</li>
</ul>
<h1 id="transaction-header">Transaction Header</h1>
<h2 id="inputs-and-outputs">Inputs and Outputs</h2>
<p>The inputs and outputs for Certification Registry transactions will differ depending on the transaction type.
Inputs are the address(es) of all the state objects required to validate a transaction.
Outputs are the address(es) of all the state objects modified by the transaction.</p>
<h4 id="createagentaction-transaction-1">CreateAgentAction Transaction</h4>
<p>Inputs:</p>
<ul>
<li>Address of the Agent to be created</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Agent created</li>
</ul>
<h4 id="createorganizationaction-transaction-1">CreateOrganizationAction Transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Organization to be created</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>
<p>Address of the Agent that submitted the transaction</p>
</li>
<li>
<p>Address of the Organization created</p>
</li>
</ul>
<h4 id="authorizeagent-transaction">AuthorizeAgent Transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Organization with the authorization list being modified</p>
</li>
<li>
<p>Address of the Agent to be added to the Organization's authorization list</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>
<p>Address of the Organization with a modified authorization list</p>
</li>
<li>
<p>Address of the Agent added to the authorization list</p>
</li>
</ul>
<h4 id="issuecertificateaction-transaction-1">IssueCertificateAction Transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Organization the certificate is being submitted on behalf of</p>
</li>
<li>
<p>Address of the Certificate to be created</p>
</li>
<li>
<p>Address of the Standard the certificate is being created against</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Certificate created</li>
</ul>
<h4 id="createstandardaction-transaction-1">CreateStandardAction transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Standard that is being created</p>
</li>
<li>
<p>Address of the Organization the Standard is being created on behalf of</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>
<p>Address of the Standard that is being created</p>
</li>
<li>
<p>Address of the Organization the Standard is being created on behalf of</p>
</li>
</ul>
<h4 id="updatestandardaction-transaction-1">UpdateStandardAction transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Standard that is being created</p>
</li>
<li>
<p>Address of the Organization the Standard is being created on behalf of</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Standard that is being created</li>
</ul>
<h4 id="accreditcertifyingbodyaction">AccreditCertifyingBodyAction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Agent submitting the transaction</p>
</li>
<li>
<p>Address of the Standard that is being accredited for</p>
</li>
<li>
<p>Address of the Organization that the transaction is being submitted on behalf of</p>
</li>
<li>
<p>Address of the Organization that is being accredited</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Organization that is being accredited</li>
</ul>
<h4 id="openrequestaction-transaction-1">OpenRequestAction transaction</h4>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Request to be created</p>
</li>
<li>
<p>Address of the Organization the Request is being made for</p>
</li>
<li>
<p>Address of the Standard the Request is being made for</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Request to be created</li>
</ul>
<h3 id="changerequeststatusaction-transaction-1">ChangeRequestStatusAction transaction</h3>
<p>Inputs:</p>
<ul>
<li>
<p>Address of the Request to be updated</p>
</li>
<li>
<p>Address of the Organization the Request is being made for</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li>Address of the Request to be updated</li>
</ul>
<h2 id="family">Family</h2>
<ul>
<li>family_name: &quot;certificate_registry&quot;</li>
<li>family_version: &quot;0.1&quot;</li>
</ul>
<h1 id="execution">Execution</h1>
<p>The result of a Certificate Registry transaction will differ depending on the type of transaction being executed.</p>
<p>A successful CreateAgentAction transaction will result in a new Agent object created in state.</p>
<p>A successful CreateOrganizationAction transaction will result in a new Organization object created in state. This Organization object will be initialized with a single authorization entry corresponding to the Agent that submitted the successful CreateOrganizationAction transaction with a role of ADMIN.</p>
<p>A successful UpdateOrganizationAction transaction will result in an updated Organization object in state.</p>
<p>A successful AuthorizeAgentAction transaction will result in a new entry to the specified Organization's authorizations list. The Agent being added to the Authorizations list will also be updated with an associated Organization ID.</p>
<p>A successful IssueCertificateAction transaction will result in a new Certificate object created in state.</p>
<p>A successful CreateStandardAction transaction will result in a new Standard object in state, with one StandardVersion sub-object. The Standard will be added to the Standards Body's standards list.</p>
<p>A successful CreateStandardAction transaction will result in a new Standard object in state, with a new StandardVersion sub-object.</p>
<p>A successful AccreditCertifyingBodyAction will result in a new Accreditation being added to an Organization object.</p>
<p>A successful OpenRequestAction transaction will result in a new Request object in state.</p>
<p>A successful ChangeRequestStatusAction transaction will result in an updated Request object in state with the status of provided.
This Request will be submitted on behalf of a Factory.</p>
<p>.. Licensed under Creative Commons Attribution 4.0 International License
.. https://creativecommons.org/licenses/by/4.0/</p>


                    </main>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
    
    
    
    
        
            
        
    
        
            
        
    
        
            
                
                    <a class="previous" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;state_delta_export&#x2F;"><i class="fa fa-angle-left"></i></a>
                
                
                
            
        
    
        
            
        
    


                
    
        
        
        
        
            
            
        
            
            
        
            
            
                
            
        
            
                <a class="next" href="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;glossary&#x2F;"><i class="fa fa-angle-right"></i></a>
                
                
            
            
        
    

            </nav>

        </div>

        
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;search_index.en.js"  type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="https:&#x2F;&#x2F;pages.github.com&#x2F;target&#x2F;ConsenSource&#x2F;book.js" type="text/javascript" charset="utf-8"></script>
        
    </body>
</html>
